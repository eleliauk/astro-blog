---
title: jsç±»å‹è½¬æ¢
published: 2024-08-17T16:47:37.000Z
description: ''
updated: ''
tags: ['Javascript']
draft: false
pin: 0
toc: true
lang: zh
abbrlink: ''
---

# `Javascript` éšå¼ç±»å‹è½¬æ¢

## ç±»å‹éƒ½æœ‰ä»€ä¹ˆ

- Number
- String
- Boolean
- Null
- Undefined
- Object
- Symbol (ES2015)
- BigInt (ESNext stage 4)

æ˜¯ä¸æ˜¯æ„Ÿè§‰è¿˜æœ‰ Functionï¼Œæ¯•ç«Ÿèƒ½ç”¨**typeof**è·å–åˆ°ï¼Ÿä¸ï¼Œå‡½æ•°ã€æ•°ç»„éƒ½æ˜¯ Object çš„å­ç±»å‹ã€‚

ç±»å‹åˆ†ä¸º `åŸºæœ¬ç±»å‹`å’Œ`å¤åˆç±»å‹` ä¸¤ç§ï¼Œé™¤äº†å¯¹è±¡ï¼Œå…¶å®ƒéƒ½æ˜¯åŸºæœ¬ç±»å‹

### æ¥ä¸‹æ¥æœ‰è¯·é‡é‡çº§å˜‰å®¾

## To Primitive

ç»“æ„ï¼štoPrimitive(input: **any**, preferedType?: **'string' |'number'**)
ä½œç”¨ï¼šå†…éƒ¨æ–¹æ³•ï¼Œå°†ä»»æ„å€¼è½¬æ¢æˆåŸå§‹å€¼

è½¬æ¢è§„åˆ™ï¼š

1. å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ä¸å¤„ç†ã€‚
2. è°ƒç”¨ `valueOf()`ï¼Œå¹¶ç¡®ä¿è¿”å›å€¼æ˜¯åŸºæœ¬ç±»å‹ã€‚
3. å¦‚æœæ²¡æœ‰ valueOf è¿™ä¸ªæ–¹æ³•æˆ–è€… valueOf è¿”å›çš„ç±»å‹ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆå¯¹è±¡ä¼šç»§ç»­è°ƒç”¨ `toString()` æ–¹æ³•ã€‚
4. å¦‚æœåŒæ—¶æ²¡æœ‰ valueOf å’Œ toString æ–¹æ³•ï¼Œæˆ–è€…è¿”å›çš„éƒ½ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆç›´æ¥æŠ›å‡º `TypeError` å¼‚å¸¸ã€‚

> æ³¨æ„ï¼šå¦‚æœ**preferedType=string**ï¼Œé‚£ä¹ˆ 2ã€3 é¡ºåºè°ƒæ¢

æ¥ç€ï¼Œæˆ‘ä»¬çœ‹ä¸‹å„ä¸ªå¯¹è±¡çš„è½¬æ¢å®ç°

| å¯¹è±¡     | valueOf() | toString()             | é»˜è®¤ preferedType |
| -------- | --------- | ---------------------- | ----------------- |
| Object   | åŸå€¼      | "[object Object]"      | Number            |
| Function | åŸå€¼      | "function xyz() {...}" | Number            |
| Array    | åŸå€¼      | "x,y,z"                | Number            |
| Date     | æ•°å­—      | "Sat May 22 2021..."   | String            |

1. æ•°ç»„çš„ toString() å¯ä»¥ç­‰æ•ˆä¸º `join(",")`ï¼Œé‡åˆ° null, undefined éƒ½è¢«å¿½ç•¥ï¼Œé‡åˆ° symbol ç›´æ¥æŠ¥é”™ï¼Œé‡åˆ°æ— æ³• ToPrimitive çš„å¯¹è±¡ä¹ŸæŠ¥é”™ã€‚
2. ä½¿ç”¨ `æ¨¡æ¿å­—ç¬¦ä¸²`æˆ–è€…ä½¿ç”¨`String(...)` åŒ…è£…æ—¶ï¼ŒpreferedType=stringï¼Œå³ä¼˜å…ˆè°ƒç”¨ .toString()ã€‚
3. ä½¿ç”¨ `å‡æ³•`æˆ–è€…`Number(...)` åŒ…è£…æ—¶ï¼ŒpreferedType=numberï¼Œå³ä¼˜å…ˆè°ƒç”¨`.valueOf()`

æ¥ä¸‹æ¥çœ‹å‡ ä¸ªğŸŒ°

```javascript
[1, null, undefined, 2].toString() === '1,,,2';

// Uncaught TypeError: Cannot convert a Symbol value to a string
[1, Symbol('x')].toString()

// Uncaught TypeError: Cannot convert object to primitive value
  [1, Object.create(null)].toString()
```

## ToNumber

ä¸€äº›ç‰¹æ®Šå€¼è½¬ä¸ºæ•°å­—çš„ä¾‹å­ï¼Œç­‰ä¸‹è¦ç”¨åˆ°

```javascript
Number('0') === 0
Number('') === 0
Number('   ') === 0
Number('\n') === 0
Number('\t') === 0
Number(null) === 0
Number(false) === 0
Number(true) === 1
Number(undefined) // NaN
Number('x') // NaN
```

## åŠ å‡æ³• +-

åŠ å‡æ³•è¿ç®—ä¸­éµå¾ªäº†ä¸€äº›éšå¼è½¬æ¢è§„åˆ™ï¼š

##### é‡åˆ°å¯¹è±¡å…ˆæ‰§è¡Œ ToPrimitive è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹

- **åŠ æ³•**ï¼ˆ+ï¼‰è¿ç®—ï¼ŒpreferedType æ˜¯é»˜è®¤å€¼
- **å‡æ³•**ï¼ˆ-ï¼‰è¿ç®—ï¼ŒpreferedType æ˜¯ Number

```javascript
// {}.toString() === "[object Object]"
1 + {} === '1[object Object]'

// [2, 3].toString() === "2,3"
1 + [2, 3] === '12,3'
  [1] + [2, 3] === '1,2,3'

function test() {}
// test.toString() === "function test() {}"
10 + test === '10function test() {}'
```

##### éå­—ç¬¦ä¸² + éå­—ç¬¦ä¸²ï¼Œä¸¤è¾¹éƒ½ä¼šå…ˆ ToNumber

è¿™é‡Œçš„éå­—ç¬¦ä¸²éƒ½æ˜¯æŒ‡åŸºæœ¬ç±»å‹ï¼Œå› ä¸ºå¯¹è±¡ä¼šå…ˆæ‰§è¡Œ ToPrimitive å˜æˆåŸºç¡€ç±»å‹

```javascript
1 + true === 2
1 + false === 1
1 + null === 1
1 + null + false + 1 === 2
1 + undefined // NaN
1 + undefined + false // NaN
1 + undefined + [1] === 'NaN1'`${1 + undefined}1` === 'NaN1'
null + null === 0

// 1 + false
1 + ![] === 1
1 + !{} === 1
!{} + !{} === 0
```

**1 + undefined + [1] === "NaN1"**

â€‹	â€¢	**1 + undefined** **éƒ¨åˆ†**ï¼š

â€‹	â€¢	å¦‚å‰æ‰€è¿°ï¼Œ1 + undefined çš„ç»“æœæ˜¯ NaNã€‚

â€‹	â€¢	**NaN + [1]**ï¼š

â€‹	â€¢	[1] æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œå½“æ•°ç»„å¯¹è±¡ä¸éå­—ç¬¦ä¸²ç±»å‹ç›¸åŠ æ—¶ï¼ŒJavaScript ä¼šè°ƒç”¨å®ƒçš„ toString() æ–¹æ³•ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

â€‹	â€¢	[1].toString() è¿”å› "1"ã€‚

â€‹	â€¢	å› æ­¤ï¼ŒNaN + [1] ç­‰åŒäº NaN + "1"ã€‚

â€‹	â€¢	NaN è¢«éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸² "NaN"ï¼Œç„¶åä¸ "1" è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥ã€‚

##### ä»»æ„å€¼ - ä»»æ„å€¼ï¼Œä¸€å¾‹æ‰§è¡Œ ToNumberï¼Œè¿›è¡Œæ•°å­—è¿ç®—ã€‚

æ­¤æ—¶çš„ preferedType === number

```javascript
3 - 1 === 2
3 - '1' === 2
'3' - 1 === 2
'3' - '1' - '2' === 0

// [].toString() => "" => Number(...) => 0
3 - [] === 3

// {}.toString() => "[object Object]" => Number(...) => NaN
3 - {} // NaN

// Date çš„é»˜è®¤ preferedType === string
var date = new Date();
date.toString = () => 'str';
date.valueOf = () => 123;

date + 1 === 'str1';
date - 1 = 122;
```

å†çœ‹`[] + {}`ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°± easy

```javascript
[].toString() === "";
{}.toString() === "[object Object]";

[] + {} === "[object Object]";
```

##### {} åœ¨æœ€å‰é¢æ—¶å¯èƒ½ä¸å†æ˜¯å¯¹è±¡

ä¸æ˜¯å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿåˆ«æ€¥ï¼Œçœ‹çœ‹ç»å…¸çš„ä¾‹å­

```javascript
{} +[] === 0
{ a: 2 } +[] === 0
```

è¿™å•¥ç©æ„ï¼Ÿè¯´å¥½çš„"[object Object]"å‘¢ï¼Ÿ

å¥½å§ï¼Œè¿™æ˜¯ `{}` å…¶å®ä»£è¡¨çš„æ˜¯**ä»£ç å—**ï¼Œæœ€åå°±å˜æˆäº†`+ []`ï¼Œæ ¹æ®å‰é¢çš„åŸåˆ™ï¼Œæ•°ç»„å…ˆè¢«è½¬æ¢æˆå­—ç¬¦ä¸² `""`ï¼Œæ¥ç€å› ä¸º+x çš„è¿ç®—ï¼Œå­—ç¬¦ä¸²è¢«è½¬æˆæ•°å­—`0`ã€‚

é‚£ { a: 2 } æ€»è¯¥æ˜¯å¯¹è±¡äº†å§ï¼Ÿå…¶å®è¿™æ—¶å€™ `a` ä¸æ˜¯ä»£è¡¨å¯¹è±¡å±æ€§ï¼Œè€Œæ˜¯è¢«å½“æˆäº†æ ‡ç­¾ï¼ˆlabelï¼‰ï¼Œæ ‡ç­¾è¿™ä¸œè¥¿ IE6 å°±å·²ç»æœ‰äº†ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬å†™æˆå¯¹è±¡æ˜¯ä¼šæŠ¥é”™çš„ï¼Œé€—å·è¦æ”¹æˆåˆ†å·æ‰èƒ½é€šè¿‡ç¼–è¯‘ã€‚

```javascript
// Uncaught SyntaxError: Unexpected token ':'
{ a: 2, b: 3 } + []

// åˆ†å· OK
{ a: 2; b: 3 } + [] === 0;
```

##### symbol ä¸èƒ½åŠ å‡

å¦‚æœåœ¨è¡¨è¾¾å¼ä¸­æœ‰ symbol ç±»å‹ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥æŠ¥é”™ã€‚æ¯”å¦‚`1 + Symbol("x")`æŠ¥é”™å¦‚ä¸‹ï¼š

```livecodeserver
Uncaught TypeError: Cannot convert a Symbol value to a number
```

## å®½æ¾ç›¸ç­‰ ==

ç›¸ç­‰äºå…¨ç­‰éƒ½éœ€è¦å¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå½“ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œå®½æ¾ç›¸ç­‰ä¼šè§¦å‘éšå¼è½¬æ¢ã€‚ä¸‹é¢ä»‹ç»è§„åˆ™ï¼š

##### å¯¹è±¡ == å¯¹è±¡ï¼Œç±»å‹ä¸€è‡´åˆ™ä¸åšè½¬æ¢

```javascript
{} != {}
[] != {}
[] != []
```

##### å¯¹è±¡ == åŸºæœ¬å€¼ï¼Œå¯¹è±¡å…ˆæ‰§è¡Œ ToPrimitive è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹

```javascript
// å°å¿ƒä»£ç å—
"[object Object]" == {}
[] == ""
[1] == "1"
[1,2] == "1,2"
```

##### å¸ƒå°”å€¼ == éå¸ƒå°”å€¼ï¼Œå¸ƒå°”å€¼å…ˆè½¬æ¢æˆæ•°å­—ï¼Œå†æŒ‰æ•°å­—è§„åˆ™æ“ä½œ

```javascript
// [] => "" => Number(...) => 0
// false => 0
[] == false

// [1] => "1" => 1
// true => 1
  [1] == true

// [1,2] => "1,2" => NaN
// true => 1
  [1, 2] != true

'0' == false
'' == false
```

##### æ•°å­— == å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸² ToNumber è½¬æ¢æˆæ•°å­—

```javascript
"2" == 2
[] == 0
[1] == 1
// [1,2].toString() => "1,2" => Number(...) => NaN
[1,2] != 1
```

##### nullã€undefinedã€symbol

nullã€undefined ä¸ä»»ä½•éè‡ªèº«çš„å€¼å¯¹æ¯”ç»“æœéƒ½æ˜¯ falseï¼Œä½†æ˜¯`null == undefined` æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚

```javascript
null == null
undefined == undefined
undefined == null

null != 0
null != false

undefined != 0
undefined != false

Symbol('x') != Symbol('x')
```

## å¯¹æ¯” < >

å¯¹æ¯”ä¸åƒç›¸ç­‰ï¼Œå¯ä»¥ä¸¥æ ¼ç›¸ç­‰ï¼ˆ===ï¼‰é˜²æ­¢ç±»å‹è½¬æ¢ï¼Œå¯¹æ¯”ä¸€å®šä¼šå­˜åœ¨éšå¼ç±»å‹è½¬æ¢ã€‚

##### å¯¹è±¡æ€»æ˜¯å…ˆæ‰§è¡Œ ToPrimitive ä¸ºåŸºæœ¬ç±»å‹

```javascript
[] < [] // false
// => "" < ""
[] <= {} // true
"" <= "[object Object]"
({} < {}) // false
({} <= {}) // true
```

åé¢è¿™ä¸¤ä¸ªè¿˜æŒºæœ‰è¯´æ³•çš„

**{} < {}**

â€‹	â€¢	**ä»£ç å— vs è¡¨è¾¾å¼**ï¼š

â€‹	â€¢	åœ¨æ²¡æœ‰æ‹¬å·çš„æƒ…å†µä¸‹ï¼Œ{} è¢«è§£é‡Šä¸ºä¸€ä¸ªä»£ç å—è€Œä¸æ˜¯å¯¹è±¡å­—é¢é‡ã€‚

â€‹	â€¢	å› æ­¤ï¼Œ{} < {} è¢«è§£é‡Šä¸ºä¸€ä¸ªç©ºä»£ç å— < ä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„æ¯”è¾ƒã€‚

â€‹	â€¢	ç”±äºç¬¬ä¸€ä¸ª {} è¢«å½“ä½œä»£ç å—ï¼Œ< è¿ç®—ç¬¦ä¹‹åçš„ {} å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¯­æ³•é”™è¯¯ï¼Œå› ä¸ºå®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„å®šä¹‰ï¼Œä½†æ²¡æœ‰æœ‰æ•ˆçš„ä¸Šä¸‹æ–‡ã€‚

**å®é™…ä¸Š**ï¼Œ{} < {} åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ï¼Œä½†åœ¨æŸäº›ç¯å¢ƒä¸­ï¼Œå¯èƒ½è§£é‡Šä¸º falseï¼Œå› ä¸º JavaScript ä¸èƒ½æ¯”è¾ƒä¸¤ä¸ªä»£ç å—ã€‚

åŠ ä¸Šæ‹¬å·å°±æ˜¯

({} < {})ï¼š{} è¢«è§£é‡Šä¸ºå¯¹è±¡å­—é¢é‡ï¼Œå¹¶ä¸” () æ‹¬èµ·æ¥ç¡®ä¿ {} < {} ä½œä¸ºå¯¹è±¡å­—é¢é‡è¢«æ­£ç¡®è§£æã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ{} è½¬æ¢ä¸º "[object Object]"ï¼Œè€Œ "[object Object]" < "[object Object]" ä¸º falseï¼Œå› ä¸ºä»»ä½•ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²æ¯”è¾ƒéƒ½æ˜¯ falseã€‚

**{} <= {}**

â€‹	â€¢	**ä»£ç å— vs è¡¨è¾¾å¼**ï¼š

â€‹	â€¢	å’Œä¸Šé¢ä¸€æ ·ï¼Œ{} <= {} è¢«è§£é‡Šä¸ºä¸€ä¸ªä»£ç å— < ä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„æ¯”è¾ƒã€‚

â€‹	â€¢	ç”±äº <= è¿ç®—ç¬¦å’Œ < è¿ç®—ç¬¦ä¸€æ ·ï¼Œå¯èƒ½å¯¼è‡´è¯­æ³•é”™è¯¯æˆ–æ— æ•ˆçš„æ¯”è¾ƒã€‚

**å®é™…ä¸Š**ï¼Œ{} <= {} ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯æˆ–è¢«è§£é‡Šä¸º true åœ¨æŸäº›ç‰¹å®šçš„è§£æç¯å¢ƒä¸­ï¼Œè™½ç„¶ç†è®ºä¸Šå®ƒæ˜¯ä¸è¢«å…è®¸çš„ã€‚

##### ä»»ä½•ä¸€è¾¹å‡ºç°éå­—ç¬¦ä¸²çš„å€¼ï¼Œåˆ™ä¸€å¾‹è½¬æ¢æˆæ•°å­—åšå¯¹æ¯”

```javascript
// ["06"] => "06" => 6
['06'] < 2 // false

  ['06'] < '2' // true
  ['06'] > 2 // true

null // true
- 1 < 5 < null // true
0 <= null // true

0 <= false // true
0 < false // false

// undefined => Number(...) => NaN
undefined < 5 // false
```

## To Boolean

æ—¢ç„¶æ˜¯æ€»ç»“ï¼Œé‚£ä¹ˆå¯èƒ½è¿˜è¦è®²ä¸€ä¸‹å¸ƒå°”å€¼çš„éšå¼è½¬æ¢ã€‚è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æœ‰å“ªäº›åœ°æ–¹ä¼šä½¿ç”¨åˆ°ï¼š

- if(...)
- for(;...;)
- while(...)
- do while(...)
- ... ? :
- ||
- &&

æ—¢ç„¶çŸ¥é“ä¼šè½¬æ¢ï¼Œé‚£ä¹ˆä»€ä¹ˆå€¼æ˜¯çœŸå€¼ï¼Œä»€ä¹ˆå€¼æ˜¯å‡å€¼å‘¢ï¼Ÿæ¢ä¸ªæ€è·¯ï¼Œå‡å€¼ä»¥å¤–éƒ½æ˜¯çœŸå€¼ã€‚çœ‹çœ‹å“ªäº›æ˜¯**å‡å€¼**ï¼š

- undefined
- null
- false
- +0
- -0
- NaN
- ""

## æ€»ç»“

å¯¹è±¡éƒ½éœ€è¦å…ˆ ToPrimitive è½¬æˆåŸºæœ¬ç±»å‹ï¼Œé™¤éæ˜¯å®½æ¾ç›¸ç­‰ï¼ˆ==ï¼‰æ—¶ä¸¤ä¸ªå¯¹è±¡åšå¯¹æ¯”ã€‚

- \+   æ²¡æœ‰å­—ç¬¦ä¸²å°±å…¨è½¬æ•°å­—
- \-   å…¨è½¬æ•°å­—ï¼ŒpreferedType===Number
- ==  åŒç±»å‹ä¸è½¬ï¼Œæ•°å­—ä¼˜å…ˆï¼Œå¸ƒå°”å…¨è½¬æ•°å­—ï¼Œnullã€undefinedã€symbol ä¸è½¬
- <>  æ•°å­—ä¼˜å…ˆï¼Œé™¤éä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²
